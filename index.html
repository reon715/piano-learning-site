<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Piano Learning App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      text-align: center;
      padding: 20px;
    }

    .nav button {
      margin: 5px;
      padding: 10px 18px;
      font-size: 15px;
      cursor: pointer;
    }

    .page { display: none; }
    .page.active { display: block; }

    .piano {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .key {
      width: 55px;
      height: 200px;
      border: 1px solid #333;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 10px;
      user-select: none;
    }

    .key:active {
      background: #ddd;
    }
  </style>
</head>
<body>

<h1>ğŸ¹ Piano Learning App</h1>
<p>2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–å¯¾å¿œï¼ˆC4ã€œB5ï¼‰</p>

<div class="nav">
  <button onclick="showPage('home')">ãƒ›ãƒ¼ãƒ </button>
  <button onclick="showPage('stage1')">Stage 1</button>
  <button onclick="showPage('stage2')">Stage 2</button>
  <button onclick="showPage('stage3')">Stage 3</button>
</div>

<div id="home" class="page active">
  <h2>ã‚ˆã†ã“ã</h2>
  <p>ãã‚‰ãã‚‰æ˜Ÿã‚’æ®µéšçš„ã«ç·´ç¿’ã—ã¾ã™</p>
</div>

<div id="stage1" class="page">
  <h2>Stage 1ï¼šå³æ‰‹</h2>
  <p>C4 C4 G4 G4 A4 A4 G4</p>
</div>

<div id="stage2" class="page">
  <h2>Stage 2ï¼šå·¦æ‰‹</h2>
  <p>C3 / G3 ã®ãƒªã‚ºãƒ ï¼ˆæƒ³å®šï¼‰</p>
</div>

<div id="stage3" class="page">
  <h2>Stage 3ï¼šä¸¡æ‰‹</h2>
  <p>å³æ‰‹ï¼šC4ã€œC5 / å·¦æ‰‹ï¼šä½éŸ³</p>
</div>

<!-- ğŸ¹ 2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–éµç›¤ -->
<div class="piano">
  <!-- Octave 4 -->
  <div class="key" data-note="C4">C4</div>
  <div class="key" data-note="D4">D4</div>
  <div class="key" data-note="E4">E4</div>
  <div class="key" data-note="F4">F4</div>
  <div class="key" data-note="G4">G4</div>
  <div class="key" data-note="A4">A4</div>
  <div class="key" data-note="B4">B4</div>

  <!-- Octave 5 -->
  <div class="key" data-note="C5">C5</div>
  <div class="key" data-note="D5">D5</div>
  <div class="key" data-note="E5">E5</div>
  <div class="key" data-note="F5">F5</div>
  <div class="key" data-note="G5">G5</div>
  <div class="key" data-note="A5">A5</div>
  <div class="key" data-note="B5">B5</div>
</div>

<script>
  // ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ
  const pages = document.querySelectorAll('.page');
  function showPage(id) {
    pages.forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  // Web Audio API
  const AudioContext = window.AudioContext || window.webkitAudioContext;
  const audioCtx = new AudioContext();

  const freqMap = {
    C4: 261.63, D4: 293.66, E4: 329.63, F4: 349.23,
    G4: 392.00, A4: 440.00, B4: 493.88,
    C5: 523.25, D5: 587.33, E5: 659.25, F5: 698.46,
    G5: 783.99, A5: 880.00, B5: 987.77
  };

  function playNote(note) {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.frequency.value = freqMap[note];
    osc.type = "sine";

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    gain.gain.setValueAtTime(0.001, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.4, audioCtx.currentTime + 0.02);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.6);

    osc.start();
    osc.stop(audioCtx.currentTime + 0.6);
  }

  document.querySelectorAll('.key').forEach(key => {
    key.addEventListener('click', () => {
      playNote(key.dataset.note);
    });
  });
</script>

</body>
</html>
