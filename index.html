<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Piano Learning App</title>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f4f4f4;
  padding: 20px;
}

.nav button {
  margin: 5px;
  padding: 10px 15px;
}

.page { display: none; }
.page.active { display: block; }

/* ğŸ¹ ãƒ”ã‚¢ãƒå…¨ä½“ */
.piano-wrapper {
  overflow-x: auto;
  margin: 30px auto;
}

.piano {
  position: relative;
  display: flex;
  width: max-content;
}

/* ç™½éµ */
.white-key {
  width: 60px;
  height: 220px;
  border: 1px solid #333;
  background: white;
  position: relative;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 8px;
  cursor: pointer;
  user-select: none;
}

.white-key:active {
  background: #ddd;
}

/* é»’éµ */
.black-key {
  width: 40px;
  height: 140px;
  background: black;
  position: absolute;
  top: 0;
  z-index: 2;
  margin-left: -20px;
  color: white;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 6px;
  font-size: 12px;
  cursor: pointer;
}

.black-key:active {
  background: #444;
}
</style>
</head>

<body>

<h1>ğŸ¹ Piano Learning App</h1>
<p>2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ï¼‹é»’éµå¯¾å¿œï¼ˆC4ã€œB5ï¼‰</p>

<div class="nav">
  <button onclick="showPage('home')">Home</button>
  <button onclick="showPage('stage1')">Stage 1</button>
  <button onclick="showPage('stage2')">Stage 2</button>
  <button onclick="showPage('stage3')">Stage 3</button>
</div>

<div id="home" class="page active">
  <h2>ã‚ˆã†ã“ã</h2>
  <p>ç™½éµãƒ»é»’éµã©ã¡ã‚‰ã‚‚éŸ³ãŒé³´ã‚Šã¾ã™</p>
</div>

<div id="stage1" class="page">
  <h2>Stage 1ï¼šå³æ‰‹</h2>
  <p>C4 C4 G4 G4 A4 A4 G4</p>
</div>

<div id="stage2" class="page">
  <h2>Stage 2ï¼šå·¦æ‰‹</h2>
  <p>ä½éŸ³ã§ãƒªã‚ºãƒ ç·´ç¿’</p>
</div>

<div id="stage3" class="page">
  <h2>Stage 3ï¼šä¸¡æ‰‹</h2>
  <p>ä¸¡æ‰‹ã§æ¼”å¥ã—ã‚ˆã†</p>
</div>

<!-- ğŸ¹ ãƒ”ã‚¢ãƒ -->
<div class="piano-wrapper">
  <div class="piano">

    <!-- ===== Octave 4 ===== -->
    <div class="white-key" data-note="C4">C4</div>
    <div class="black-key" data-note="C#4" style="left:45px">C#</div>

    <div class="white-key" data-note="D4">D4</div>
    <div class="black-key" data-note="D#4" style="left:105px">D#</div>

    <div class="white-key" data-note="E4">E4</div>

    <div class="white-key" data-note="F4">F4</div>
    <div class="black-key" data-note="F#4" style="left:225px">F#</div>

    <div class="white-key" data-note="G4">G4</div>
    <div class="black-key" data-note="G#4" style="left:285px">G#</div>

    <div class="white-key" data-note="A4">A4</div>
    <div class="black-key" data-note="A#4" style="left:345px">A#</div>

    <div class="white-key" data-note="B4">B4</div>

    <!-- ===== Octave 5 ===== -->
    <div class="white-key" data-note="C5">C5</div>
    <div class="black-key" data-note="C#5" style="left:465px">C#</div>

    <div class="white-key" data-note="D5">D5</div>
    <div class="black-key" data-note="D#5" style="left:525px">D#</div>

    <div class="white-key" data-note="E5">E5</div>

    <div class="white-key" data-note="F5">F5</div>
    <div class="black-key" data-note="F#5" style="left:645px">F#</div>

    <div class="white-key" data-note="G5">G5</div>
    <div class="black-key" data-note="G#5" style="left:705px">G#</div>

    <div class="white-key" data-note="A5">A5</div>
    <div class="black-key" data-note="A#5" style="left:765px">A#</div>

    <div class="white-key" data-note="B5">B5</div>

  </div>
</div>

<script>
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

let audioCtx = null;

const freqMap = {
  C4:261.63, "C#4":277.18, D4:293.66, "D#4":311.13, E4:329.63,
  F4:349.23, "F#4":369.99, G4:392.00, "G#4":415.30,
  A4:440.00, "A#4":466.16, B4:493.88,

  C5:523.25, "C#5":554.37, D5:587.33, "D#5":622.25, E5:659.25,
  F5:698.46, "F#5":739.99, G5:783.99, "G#5":830.61,
  A5:880.00, "A#5":932.33, B5:987.77
};

function playNote(note) {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }

  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();

  osc.frequency.value = freqMap[note];
  osc.type = "sine";

  osc.connect(gain);
  gain.connect(audioCtx.destination);

  gain.gain.setValueAtTime(0.001, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.4, audioCtx.currentTime + 0.02);
  gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.6);

  osc.start();
  osc.stop(audioCtx.currentTime + 0.6);
}

document.querySelectorAll('.white-key, .black-key').forEach(key => {
  key.addEventListener('click', () => {
    playNote(key.dataset.note);
  });
});
</script>

</body>
</html>
